<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Information</title>
    <link rel="stylesheet" href="CompanyInfo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

   
    <div class="nav-bar">
        <img src="/img/QCU IMS (2 x 1.9 in).svg" alt="Logo" class="logo">
        <div class="nav-links">
            <a href="Mailbox.html">Mailbox</a>
            <a href="">Intern</a>
            <a href="">Company</a>
            <a href="">Employer</a>
            <a href="">Faculty</a>
            <a href="">Archive</a>
                <div class="user-icon">
                    <img src="img/cat-svgrepo-com.svg" alt="User Icon">
                </div>
                <div class="user-menu">
                <span class="admin-text">Admin <i class="fa-solid fa-angle-down"></i></span>
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="#">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <script src="nav-bar.js"></script>
</body>
</html>
    
<script>
    document.addEventListener('DOMContentLoaded', () => {
    const adminText = document.querySelector('.admin-text');
    const dropdownMenu = document.getElementById('dropdownMenu');

    adminText.addEventListener('click', () => {
        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    });

    document.addEventListener('click', (event) => {
        if (!adminText.contains(event.target) && !dropdownMenu.contains(event.target)) {
            dropdownMenu.style.display = 'none';
        }
    });
});
  
</script>

        <div class="header">
        <h2>Company Information</h2>
        <p>List of affiliated industry partners</p>
        </div>

        <div class="mid-top">
            <div class="search">
                <input type="text" id="searchInput" placeholder="Search">
                <button id="addCompany"> Add Company</button>
            </div> 
            </div>

            <div class="table-container">
                <table class="table-stripped">
                    <thead>
                        <tr>
                            <th>No</th>
                            <th>Company Name</th>
                            <th>Company Address</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="companyTableBody">
                        <tr>
                            <td>1</td>
                            <td>National</td>
                            <td>Tarlac, Cavite</td>
                            <td class="status">Active</td>
                            <td class="actions">
                                <button class="edit-btn">Edit</button>
                                <button class="end-btn">End Assignment</button> 
                                <button class="delete-btn" onclick="deleteRow(this)">Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Add Company Form -->
            <div class="add-company-container" id="companyCont" style="display: none;">
                <div class="add-company-wrapper">
                    <h2>Company Profile</h2>
                    <div class="add-company-info">
                        <p>Company Name</p>
                        <input type="text" id="companyName">
                        <p>Description</p>
                        <input type="text" id="description">
                        <p>City</p>
                        <select id="city">
                            <option value="Quezon City">Quezon City</option>
                            <option value="Manila">Manila</option>
                            <option value="Caloocan">Caloocan</option>
                            <option value="Marikina">Marikina</option>
                        </select>
                        <p>Province</p>
                        <select id="province">
                            <option value="Nueva Ecija">Nueva Ecija</option>
                            <option value="Bulacan">Bulacan</option>
                            <option value="Pampanga">Pampanga</option>
                            <option value="Metro Manila">Metro Manila</option>
                        </select>
                        <div class="buttons">
                            <button class="insert" id="insert">Insert</button>
                            <button class="close" id="close">Close</button>

                        </div>
                    </div>            
                </div>
            </div>
            
            <script>
                document.getElementById("addCompany").addEventListener("click", openForm);
                document.getElementById("close").addEventListener("click", closeForm);
                document.getElementById("insert").addEventListener("click", insertData);
            
                function openForm() {
                    document.getElementById("companyCont").style.display = "block";
                }
            
                function closeForm() {
                    document.getElementById("companyCont").style.display = "none";
                }
            
                function insertData() {
                    let companyName = document.getElementById("companyName").value;
                    let description = document.getElementById("description").value;
                    let city = document.getElementById("city").value;
                    let province = document.getElementById("province").value;
            
                    if (companyName === "" || description === "" || city === "" || province === "") {
                        alert("Please fill in all fields before inserting.");
                        return;
                    }
            
                    let table = document.getElementById("companyTableBody");
                    let newRow = table.insertRow();
                    
                    newRow.innerHTML = `
                        <td>${table.rows.length}</td>
                        <td>${companyName}</td>
                        <td>${city}, ${province}</td>
                        <td class="status">Active</td>
                        <td class="actions">
                            <button class="edit-btn" onclick="editRow(this)">Edit</button>
                            <button class="end-btn" onclick="endAssignment(this)">End Assignment</button> 
                            <button class="delete-btn" onclick="deleteRow(this)">Delete</button>
                        </td>
                    `;
            
                    // Clear inputs
                    document.getElementById("companyName").value = "";
                    document.getElementById("description").value = "";
                    document.getElementById("city").value = "";
                    document.getElementById("province").value = "";
            
                    closeForm();
                }
            
                function deleteRow(button) {
                    let row = button.closest("tr");
                    row.remove();
                }

                function editRow(button) {
        let row = button.closest("tr");
        let cells = row.getElementsByTagName("td");

        let companyName = cells[1].innerText;
        let address = cells[2].innerText.split(", ");
        let city = address[0];
        let province = address[1];

        document.getElementById("companyName").value = companyName;
        document.getElementById("city").value = city;
        document.getElementById("province").value = province;

        openForm();

        // Change Insert button to "Save Changes"
        let insertBtn = document.getElementById("insert");
        insertBtn.innerText = "Save";
        insertBtn.classList.add("save-changes"); 
        insertBtn.onclick = function () {
            cells[1].innerText = document.getElementById("companyName").value;
            cells[2].innerText = document.getElementById("city").value + ", " + document.getElementById("province").value;
            insertBtn.innerText = "Insert";
            insertBtn.classList.remove("save-changes"); // Remove class when done
            insertBtn.onclick = insertData;
            closeForm();
        };
    }

    function endAssignment(button) {
    let row = button.closest("tr");
    let statusCell = row.querySelector("td:nth-child(4)"); // Selects the 4th cell (Status)

    if (statusCell) {
        if (statusCell.innerText.trim() === "Active") {
            statusCell.innerText = "Inactive";
            statusCell.style.color = "red";
        } else {
            statusCell.innerText = "Active";
            statusCell.style.color = "green";
        }
    } else {
        console.error("Status cell not found.");
    }
}
</script>


<script>

    let subMenu = document.getElementById("subMenu");

    const addCompany = document.querySelector("#addCompany");
    const companyCont = document.querySelector("#companyCont");

    if (addCompany && companyCont) {
        addCompany.addEventListener('click', () => {
            companyCont.classList.toggle("show");
        });
    }


    function toggleMenu(){
        subMenu.classList.toggle("open-menu");
    }

</script>

<script>
function toggleDropdown() {
    document.getElementById("dropdownMenu").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
    if (!event.target.matches('.user-icon img')) {
        var dropdowns = document.getElementsByClassName("dropdown-menu");
        for (var i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
            }
        }
    }
};
</script>





</body>
</html>
     
